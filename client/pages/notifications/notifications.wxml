<!--pages/notifications/notifications.wxml-->
<view class="container">
  <view class="header">
    <text class="title">æ¶ˆæ¯é€šçŸ¥</text>
    <view class="header-info">
      <text class="unread-count" wx:if="{{unreadCount > 0}}">{{unreadCount}}æ¡æœªè¯»</text>
      <text class="action-btn" bindtap="markAllAsRead" wx:if="{{unreadCount > 0}}">å…¨éƒ¨å·²è¯»</text>
    </view>
  </view>
  
  <view class="notification-list">
    <block wx:if="{{notifications.length > 0}}">
      <view class="notification-item {{!item.read ? 'unread' : ''}}" 
            wx:for="{{notifications}}" 
            wx:key="id"
            bindtap="markAsRead" 
            data-id="{{item.id}}">
        <view class="notification-dot" wx:if="{{!item.read}}"></view>
        <view class="notification-content">
          <view class="notification-header">
            <view class="notification-title">{{item.title}}</view>
            <view class="notification-type">{{item.type === 'system' ? 'ç³»ç»Ÿ' : item.type === 'announcement' ? 'å…¬å‘Š' : 'æ›´æ–°'}}</view>
          </view>
          <view class="notification-text">{{item.content}}</view>
          <view class="notification-time">{{item.time}}</view>
        </view>
      </view>
    </block>
    
    <view class="empty-list" wx:if="{{notifications.length === 0 && !loading}}">
      <view class="empty-icon">ğŸ“¢</view>
      <text class="empty-text">æš‚æ— é€šçŸ¥æ¶ˆæ¯</text>
    </view>
  </view>
  
  <view class="loading" wx:if="{{loading && notifications.length === 0}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
  
  <!-- åŠ è½½æ›´å¤šæç¤º -->
  <view class="load-more" wx:if="{{loading && notifications.length > 0}}">
    <text class="load-more-text">åŠ è½½ä¸­...</text>
  </view>
  
  <view class="no-more" wx:if="{{!hasMore && notifications.length > 0}}">
    <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
  </view>
</view> 